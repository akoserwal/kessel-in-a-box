{
  "dashboard": {
    "title": "SpiceDB Overview",
    "tags": ["kessel", "spicedb", "authorization"],
    "timezone": "browser",
    "schemaVersion": 16,
    "version": 1,
    "refresh": "10s",
    "panels": [
      {
        "id": 1,
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
        "type": "graph",
        "title": "Request Rate",
        "targets": [
          {
            "expr": "rate(grpc_server_started_total{job=\"spicedb\"}[1m])",
            "legendFormat": "{{grpc_method}}"
          }
        ],
        "yaxes": [
          {"format": "reqps", "label": "Requests/sec"},
          {"format": "short"}
        ]
      },
      {
        "id": 2,
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
        "type": "graph",
        "title": "Error Rate",
        "targets": [
          {
            "expr": "rate(grpc_server_handled_total{job=\"spicedb\",grpc_code!=\"OK\"}[1m])",
            "legendFormat": "{{grpc_code}}"
          }
        ],
        "yaxes": [
          {"format": "reqps", "label": "Errors/sec"},
          {"format": "short"}
        ]
      },
      {
        "id": 3,
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
        "type": "graph",
        "title": "Latency (p50, p95, p99)",
        "targets": [
          {
            "expr": "histogram_quantile(0.50, rate(grpc_server_handling_seconds_bucket{job=\"spicedb\"}[1m]))",
            "legendFormat": "p50"
          },
          {
            "expr": "histogram_quantile(0.95, rate(grpc_server_handling_seconds_bucket{job=\"spicedb\"}[1m]))",
            "legendFormat": "p95"
          },
          {
            "expr": "histogram_quantile(0.99, rate(grpc_server_handling_seconds_bucket{job=\"spicedb\"}[1m]))",
            "legendFormat": "p99"
          }
        ],
        "yaxes": [
          {"format": "s", "label": "Latency"},
          {"format": "short"}
        ]
      },
      {
        "id": 4,
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8},
        "type": "singlestat",
        "title": "SpiceDB Health Status",
        "targets": [
          {
            "expr": "up{job=\"spicedb\"}"
          }
        ],
        "format": "none",
        "valueName": "current",
        "valueMaps": [
          {"value": "1", "text": "UP"},
          {"value": "0", "text": "DOWN"}
        ],
        "colors": ["#d44a3a", "#299c46", "#299c46"],
        "thresholds": "0.5,1"
      }
    ]
  }
}
